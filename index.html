<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect Wallet Test</title>
    <style>
        body {
            background: #004d00;
            color: #ffffff;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        button {
            font-size: 1.2em;
            padding: 10px 20px;
            cursor: pointer;
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>Wallet Verbindung Test</h1>
    <button id="connectMetaMask">MetaMask Verbinden</button>
    <button id="connectWalletConnect">WalletConnect (Trust, Uniswap, etc.)</button>
    <button id="connectCoinbase">Coinbase Wallet Verbinden</button>

    <p id="walletAddress">Wallet: Nicht verbunden</p>

    <!-- Web3Modal V2 Ã¼ber esm.sh -->
    <script type="module">
        import { ethers } from "https://esm.sh/ethers@5";
        import WalletConnectProvider from "https://esm.sh/@walletconnect/web3-provider@2";
        import CoinbaseWalletSDK from "https://esm.sh/@coinbase/wallet-sdk@3";

        let provider;
        
        async function connectMetaMask() {
            if (window.ethereum) {
                try {
                    const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    document.getElementById("walletAddress").innerText = "Wallet: " + accounts[0];
                    console.log("MetaMask verbunden:", accounts[0]);
                } catch (error) {
                    console.error("MetaMask Fehler:", error);
                }
            } else {
                alert("MetaMask ist nicht installiert!");
            }
        }

        async function connectWalletConnect() {
            try {
                const walletConnectProvider = new WalletConnectProvider({
                    projectId: "c1b3c575703c52649f0a69c9e6b3e836",
                    chains: [1, 137, 56] // Ethereum, Polygon, BSC
                });

                await walletConnectProvider.enable();
                provider = new ethers.providers.Web3Provider(walletConnectProvider);
                const signer = provider.getSigner();
                const address = await signer.getAddress();

                document.getElementById("walletAddress").innerText = "Wallet: " + address;
                console.log("WalletConnect verbunden:", address);
            } catch (error) {
                console.error("WalletConnect Fehler:", error);
            }
        }

        async function connectCoinbase() {
            try {
                const coinbaseWallet = new CoinbaseWalletSDK({ appName: "QuantumPepe Presale" });
                const coinbaseProvider = coinbaseWallet.makeWeb3Provider("https://mainnet.infura.io/v3/YOUR_INFURA_ID", 1);

                provider = new ethers.providers.Web3Provider(coinbaseProvider);
                const accounts = await provider.send("eth_requestAccounts", []);
                
                document.getElementById("walletAddress").innerText = "Wallet: " + accounts[0];
                console.log("Coinbase Wallet verbunden:", accounts[0]);
            } catch (error) {
                console.error("Coinbase Wallet Fehler:", error);
            }
        }

        document.getElementById("connectMetaMask").addEventListener("click", connectMetaMask);
        document.getElementById("connectWalletConnect").addEventListener("click", connectWalletConnect);
        document.getElementById("connectCoinbase").addEventListener("click", connectCoinbase);
    </script>
</body>
</html>
